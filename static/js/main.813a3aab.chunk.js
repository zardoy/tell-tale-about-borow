(this["webpackJsonptell-tale-about-borow"]=this["webpackJsonptell-tale-about-borow"]||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var o=n(3),c=n(0),i=n(11),a=n.n(i),l=n(17),r=n(91),s=n(46),d=n(99),u=n(100),b=n(98),j=n(104),p=n(101),m=Object(r.a)({outer:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"black",display:"flex",justifyContent:"center",alignItems:"center"},title:{textAlign:"center",color:"lime",margin:10}}),f=function(){var e=m();return Object(o.jsx)("div",{className:e.outer,children:Object(o.jsx)("h1",{className:e.title,children:"Thank You For Playing!"})})},O=n(12),x=n(70),h=n(103),v=[{title:"\u041d\u0430\u0447\u0430\u043b\u043e. \u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u043f\u0440\u043e\u0431\u0443\u0436\u0434\u0435\u043d\u0438\u0435.",scenes:[{file:"1/1.mp4",videoId:"12ttDGSpxdWF7zsqadB3hPTlUp9-v6Z56"},{makeChoice:[{text:"\u0421\u0435\u0441\u0442\u044c \u0437\u0430 \u043a\u043e\u043c\u043f",file:"1/2-1.mp4",videoId:"1KDjB_VI-A3PckKOOGe51GwLnvrIBVjpU"},{text:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0435\u043b\u0435\u043a",file:"1/2-2.mp4",videoId:"1ykOceSFoXxxUErTN3SSv4ySuqAlFBDeh"},{text:"\u0417\u0430\u043a\u0438\u043d\u0443\u0442\u044c\u0441\u044f \u0435\u0449\u0435",file:"1/2-3.mp4",videoId:"1k0Ux3aZpbhABMADvSpF3clfRgImVOC6M"}]}]},{title:"\u0420\u0430\u0437\u0432\u0438\u0442\u0438\u0435. \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043d\u0430 \u0443\u043b\u0438\u0446\u0443.",scenes:[{file:"2/1.mp4",videoId:"1mFqU6zoJjdha-eLc62NYNXOEMoYAigmi"},{makeChoice:[{text:"\u041f\u043e\u0439\u0442\u0438 \u043f\u0435\u0448\u043a\u043e\u043c \u043f\u043e \u043b\u0435\u0441\u0442\u043d\u0438\u0446\u0435",file:"2/2-1.mp4",videoId:"1MkSoCWs3I3s5B-h2-0TTmj8XZ4eg6Vqd"},{text:"\u041f\u043e\u0435\u0445\u0430\u0442\u044c \u043d\u0430 \u043b\u0438\u0444\u0442\u0435",file:"2/2-2.mp4",videoId:"1LlqTPu-hYR3gTsfd7wnYOC-_Two7xF69"}]},{file:"2/3.mp4",videoId:"1uoLSsAjybgWtpIDNNIEFK0KCnl4W806F"},{makeChoice:[{text:"\u041b\u0430\u0434\u0430",file:"2/4.mp4",videoId:"1cv5uIEr-M0QiPd2Zwx1SEj8AKpXEiCRv"},{text:"\u0410\u0443\u0434\u0438",file:"2/4.mp4",videoId:"1cv5uIEr-M0QiPd2Zwx1SEj8AKpXEiCRv"}]}]}],y={position:"fixed",top:0,bottom:0,left:0,right:0},g=Object(r.a)({outer:Object(O.a)(Object(O.a)({},y),{},{background:"black"}),player:Object(O.a)(Object(O.a)({},y),{},{width:"100%",height:"100%",overflow:"hidden"}),desicionsMenu:Object(O.a)(Object(O.a)({},y),{},{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100vh",zIndex:15}),pausedText:{zIndex:10,background:"rgba(0, 0, 0, 50%)"},pausedOuter:Object(O.a)(Object(O.a)({},y),{},{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"}),desicionItem:{width:300}}),k=function(e){return"https://drive.google.com/uc?export=download&id=".concat(e)},w=function(e,t){switch(t.type){case"resetState":return{episode:0,scene:0,videoSrc:k(v[0].scenes[0].videoId),decisionsMenu:null};case"nextScene":return Object(O.a)(Object(O.a)({},e),{},{scene:e.scene+1});case"nextEpisode":return Object(O.a)(Object(O.a)({},e),{},{episode:e.episode+1,scene:0});case"setVideoIdToPlay":return Object(O.a)(Object(O.a)({},e),{},{decisionsMenu:null,videoSrc:k(t.payload)});case"setDecisionsMenu":return Object(O.a)(Object(O.a)({},e),{},{decisionsMenu:t.payload});default:return e}},I=function(e){var t=e.onGameEnded,n=e.volume,i=g(),a=Object(c.useState)(!1),r=Object(l.a)(a,2),s=r[0],d=r[1],u=Object(c.useReducer)(w,{episode:0,scene:0,videoSrc:k(v[0].scenes[0].videoId),decisionsMenu:null}),b=Object(l.a)(u,2),j=b[0],p=b[1],m=Object(c.useRef)(null),f=Object(c.useCallback)((function(){var e=j.episode,n=j.scene;if(n+1>=v[j.episode].scenes.length){if(e+1>=v.length)return void t();p({type:"nextEpisode"}),e+=1,n=0}else p({type:"nextScene"}),n+=1;var o=v[e].scenes[n],c=o.makeChoice,i=o.videoId;c?p({type:"setDecisionsMenu",payload:c.map((function(e){var t=e.text,n=e.videoId;return{text:t,callback:function(){p({type:"setVideoIdToPlay",payload:n}),m.current.play()}}}))}):i&&p({type:"setVideoIdToPlay",payload:i})}),[j,t]),O=Object(c.useCallback)((function(){var e=m.current;e&&!e.ended&&(e.paused?e.play():e.pause())}),[]),y=Object(c.useCallback)((function(){try{if(!document.fullscreenEnabled)throw new Error("fullscreen isn't enabled");null===document.fullscreenElement?document.documentElement.requestFullscreen():document.exitFullscreen()}catch(e){console.error(e)}}),[]);return Object(c.useEffect)((function(){var e=function(e){var t=m.current;t&&!t.ended&&"space"===e.code.toLowerCase()&&(t.paused?t.play():t.pause())},t=m.current;if(!t)throw new TypeError("video is not defined");return t.onpause=function(){return!t.ended&&d(!0)},t.onplay=function(){return d(!1)},window.addEventListener("keydown",e),document.onfullscreenerror=function(){},function(){window.removeEventListener("keydown",e),document.onfullscreenerror=null}}),[]),Object(c.useEffect)((function(){var e=m.current;e&&!e.ended&&(e.volume=n)}),[n]),Object(o.jsxs)("div",{className:i.outer,onClick:O,onDoubleClick:y,children:[Object(o.jsx)("video",{autoPlay:!0,className:i.player,src:j.videoSrc,onEnded:f,ref:m}),s&&Object(o.jsx)("div",{className:i.pausedOuter,children:Object(o.jsx)(x.a,{variant:"h2",component:"h2",className:i.pausedText,children:"PAUSED"})}),j.decisionsMenu&&Object(o.jsx)("div",{className:i.desicionsMenu,children:j.decisionsMenu.map((function(e){var t=e.text,n=e.callback;return Object(o.jsx)(h.a,{onClick:function(e){e.stopPropagation(),n()},size:"large",color:"default",variant:"contained",className:i.desicionItem,children:t},t)}))})]})},S=n(29),C=n(44),E=n.n(C),N=n(45),T=n.n(N),M=n(102),A=n(94),B=n(95),F=n(96),L=n(97),P=Object(r.a)({root:{position:"fixed",top:0,left:0,right:0,bottom:0,background:'url("/background.gif") no-repeat bottom right/contain fixed black',overflow:"hidden",padding:"30px 20px",fontSize:"1.1em"},appTitle:{fontSize:"2.5em",fontStyle:"italic",fontWeight:900,fontFamily:"Arial, Helvetica, sans-serif",textTransform:"uppercase",textShadow:"0 0 8px currentColor"},playLoopButton:{position:"fixed",top:5,left:5},menuRoot:{margin:"20px 20px",padding:"8px 25px",borderLeft:"1px solid darkgray",overflow:"auto",fontStyle:"italic",fontWeight:"bold"},menuTitle:{marginBottom:15,fontSize:"1.6em",textShadow:"0 0 10px currentColor"},menuButton:{fontSize:"2em",cursor:"pointer",transition:".05s all",padding:"3px",fontFamily:"Arial, Helvetica, sans-serif",color:"inherit",textDecoration:"none","&:hover":{paddingLeft:"8px"},"&::before":{content:'">"',paddingRight:"6px",verticalAlign:"middle",color:"lime",fontFamily:"'Courier New', Courier, monospace",fontSize:".8em"}},menuFirstButton:{animation:"blink 2s infinite"}}),z="doNotDisplayWarning",D=function(e){var t=e.startGameCallback,n=e.volume,i=P(),a=Object(c.useState)(null===window.localStorage.getItem(z)),r=Object(l.a)(a,2),s=r[0],d=r[1],u=Object(c.useState)(!1),j=Object(l.a)(u,2),p=j[0],m=j[1],f=Object(c.useCallback)((function(){window.localStorage.setItem(z,"true"),m(!0),d(!1)}),[]),O=Object(c.useCallback)((function(){m(!0)}),[]);return Object(o.jsxs)("div",{className:i.root,children:[Object(o.jsx)(T.a,{src:"/MainMenuLoop.mp3",volume:n,playing:p,loop:!0}),s&&Object(o.jsxs)(M.a,{open:!0,disableBackdropClick:!0,children:[Object(o.jsx)(A.a,{children:"Hey!"}),Object(o.jsx)(B.a,{children:"A lot of Russian swearing. Headphones recommended."}),Object(o.jsx)(F.a,{children:Object(o.jsx)(h.a,{color:"primary",onClick:f,children:"OKAY"})})]}),!s&&!p&&Object(o.jsx)(h.a,{className:i.playLoopButton,startIcon:Object(o.jsx)(L.a,{}),variant:"outlined",onClick:O,children:"UNMUTE LOOP"}),Object(o.jsx)("h1",{className:i.appTitle,children:"TellTale About Borow"}),Object(o.jsxs)("div",{className:i.menuRoot,children:[Object(o.jsx)("div",{className:i.menuTitle,children:"Main Menu"}),Object(o.jsxs)(b.a,{container:!0,direction:"column",children:[new Array(2).fill(null).map((function(e,n){var c;return Object(o.jsx)("div",{className:E()((c={},Object(S.a)(c,i.menuButton,!0),Object(S.a)(c,i.menuFirstButton,0===n),c)),onClick:t,children:"Start The Game"},n)})),Object(o.jsx)("a",{className:i.menuButton,href:"https://github.com/zardoy/tell-tale-about-borow",children:"View on GitHub"})]})]})]})},R=Object(r.a)({volumeSlider:{position:"fixed",bottom:5,left:5,zIndex:5}}),G=function(){var e=R(),t=Object(c.useState)("home"),n=Object(l.a)(t,2),i=n[0],a=n[1],r=Object(c.useState)(.7),m=Object(l.a)(r,2),O=m[0],x=m[1],h=Object(c.useMemo)((function(){return Object(s.a)({palette:{type:"dark"}})}),[]),v=Object(c.useCallback)((function(){a("player")}),[]),y=Object(c.useCallback)((function(){a("end")}),[]),g=Object(c.useCallback)((function(e,t){return x(t)}),[]);return Object(o.jsxs)(d.a,{theme:h,children:[Object(o.jsx)(u.a,{}),Object(o.jsxs)(b.a,{container:!0,className:e.volumeSlider,children:[Object(o.jsx)(b.a,{item:!0,children:Object(o.jsx)(p.a,{})}),Object(o.jsx)(b.a,{item:!0,style:{width:200,marginLeft:5},children:Object(o.jsx)(j.a,{color:"secondary",max:1,step:.05,value:O,onChange:g})})]}),"home"===i?Object(o.jsx)(D,{startGameCallback:v,volume:O}):"end"===i?Object(o.jsx)(f,{}):"player"===i?Object(o.jsx)(I,{onGameEnded:y,volume:O}):null]})};n(68);a.a.render(Object(o.jsx)(G,{}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.813a3aab.chunk.js.map