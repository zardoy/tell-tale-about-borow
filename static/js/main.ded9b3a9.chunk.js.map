{"version":3,"sources":["components/main-menu/styles.module.scss","episodes-schema.ts","components/EpisodePlayer.tsx","components/EndScreen.tsx","components/main-menu/index.tsx","App.tsx","index.tsx"],"names":["module","exports","title","scenes","file","videoId","makeChoice","text","fixedContent","position","top","bottom","left","right","useStyles","makeStyles","outer","background","player","width","height","overflow","desicionsMenu","display","alignItems","justifyContent","flexDirection","zIndex","pausedText","pausedOuter","desicionItem","getVideoSrc","reducer","state","action","type","episode","scene","videoSrc","episodesSchema","decisionsMenu","payload","EpisodePlayer","onGameEnded","volume","classes","useState","videoPaused","setVideoPaused","useReducer","dispatch","videoElRef","useRef","onVideoEndHandler","useCallback","length","map","callback","current","play","onVideoClickHandler","videoEl","ended","paused","pause","onVideoDoubleClickHandler","document","fullscreenEnabled","Error","fullscreenElement","documentElement","requestFullscreen","exitFullscreen","err","console","error","useEffect","keyboardListener","e","code","toLowerCase","TypeError","onpause","onplay","window","addEventListener","onfullscreenerror","removeEventListener","className","onClick","onDoubleClick","autoPlay","src","onEnded","ref","Typography","variant","component","Button","key","stopPropagation","size","color","textAlign","margin","EndScreen","MainMenu","startGameCallback","audioElRef","localStorage","getItem","showWarning","setShowWarning","closeWarningHanlder","setItem","audioEl","oncanplay","Dialog","open","disableBackdropClick","DialogTitle","DialogContent","DialogActions","loop","process","volumeSlider","App","currentScreen","setCurrentScreen","appVolume","setAppVolume","muiTheme","useMemo","createMuiTheme","palette","onGameEndCallback","volumeChangeHandler","_","val","ThemeProvider","theme","CssBaseline","Grid","container","item","VolumeUp","style","marginLeft","Slider","max","step","value","onChange","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.ded9b3a9.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"home-screen\":\"styles_home-screen__3mOdz\",\"app-title\":\"styles_app-title__3ImeI\",\"menu\":\"styles_menu__2uSYA\",\"title\":\"styles_title__213TM\",\"item\":\"styles_item__2SfQF\",\"blink-animation\":\"styles_blink-animation__1KaaI\",\"blink\":\"styles_blink__3HleO\"};","type EpisodeScene = {\n    file?: string;\n    makeChoice?: {\n        text: string,\n        file: string;\n    }[];\n}[];\n\nexport default [\n    {\n        title: \"Начало. Домашнее пробуждение.\",\n        scenes: [\n            {\n                file: \"1/1.mp4\",\n                videoId: \"12ttDGSpxdWF7zsqadB3hPTlUp9-v6Z56\"\n            },\n            {\n                makeChoice: [\n                    {\n                        text: \"Сесть за комп\",\n                        file: \"1/2-1.mp4\",\n                        videoId: \"1KDjB_VI-A3PckKOOGe51GwLnvrIBVjpU\"\n                    },\n                    {\n                        text: \"Включить телек\",\n                        file: \"1/2-2.mp4\",\n                        videoId: \"1ykOceSFoXxxUErTN3SSv4ySuqAlFBDeh\"\n                    },\n                    {\n                        text: \"Закинуться еще\",\n                        file: \"1/2-3.mp4\",\n                        videoId: \"1k0Ux3aZpbhABMADvSpF3clfRgImVOC6M\"\n                    }\n                ]\n            }\n        ]\n    },\n    {\n        title: \"Развитие. Возвращение на улицу.\",\n        scenes: [\n            {\n                file: \"2/1.mp4\",\n                videoId: \"1mFqU6zoJjdha-eLc62NYNXOEMoYAigmi\"\n            },\n            {\n                makeChoice: [\n                    {\n                        text: \"Пойти пешком по лестнице\",\n                        file: \"2/2-1.mp4\",\n                        videoId: \"1MkSoCWs3I3s5B-h2-0TTmj8XZ4eg6Vqd\"\n                    },\n                    {\n                        text: \"Поехать на лифте\",\n                        file: \"2/2-2.mp4\",\n                        videoId: \"1LlqTPu-hYR3gTsfd7wnYOC-_Two7xF69\"\n                    }\n                ]\n            },\n            {\n                file: \"2/3.mp4\",\n                videoId: \"1uoLSsAjybgWtpIDNNIEFK0KCnl4W806F\"\n            },\n            {\n                makeChoice: [\n                    {\n                        text: \"Лада\",\n                        file: \"2/4.mp4\",\n                        videoId: \"1cv5uIEr-M0QiPd2Zwx1SEj8AKpXEiCRv\"\n                    },\n                    {\n                        text: \"Ауди\",\n                        file: \"2/4.mp4\",\n                        videoId: \"1cv5uIEr-M0QiPd2Zwx1SEj8AKpXEiCRv\"\n                    }\n                ]\n            }\n        ]\n    }\n];","import React, { useCallback, useEffect, useReducer, useRef, useState } from \"react\";\nimport { Button, makeStyles, Typography } from \"@material-ui/core\";\nimport episodesSchema from \"../episodes-schema\";\n\ninterface Props {\n    onGameEnded: () => unknown;\n    volume: number;\n}\n\nconst fixedContent = {\n    position: \"fixed\",\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0\n};\n\nconst useStyles = makeStyles({\n    outer: {\n        ...fixedContent as any,\n        background: \"black\"\n    },\n    player: {\n        ...fixedContent as any,\n        width: \"100%\",\n        height: \"100%\",\n        overflow: \"hidden\"\n    },\n    desicionsMenu: {\n        ...fixedContent as any,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n        height: \"100vh\",\n        zIndex: 15\n    },\n    pausedText: {\n        zIndex: 10,\n        background: \"rgba(0, 0, 0, 50%)\"\n    },\n    pausedOuter: {\n        ...fixedContent as any,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        height: \"100vh\",\n    },\n    desicionItem: {\n        width: 300\n    }\n});\n\ninterface State {\n    episode: number,\n    scene: number,\n    videoSrc: string,\n    decisionsMenu: null | {\n        text: string,\n        callback: () => unknown;\n    }[];\n}\n\ntype Action = {\n    type: \"nextScene\" | \"nextEpisode\" | \"resetState\";\n} | {\n    type: \"setVideoIdToPlay\",\n    payload: string;\n} | {\n    type: \"setDecisionsMenu\",\n    payload: State[\"decisionsMenu\"];\n};\n\nconst getVideoSrc = (videoId: string): string => `https://drive.google.com/uc?export=download&id=${videoId}`;\nconst reducer = (state: State, action: Action): State => {\n\n    switch (action.type) {\n        case \"resetState\":\n            return { episode: 0, scene: 0, videoSrc: getVideoSrc(episodesSchema[0].scenes[0].videoId!), decisionsMenu: null };\n        case \"nextScene\":\n            return { ...state, scene: state.scene + 1 };\n        case \"nextEpisode\":\n            return { ...state, episode: state.episode + 1, scene: 0 };\n        case \"setVideoIdToPlay\":\n            return { ...state, decisionsMenu: null, videoSrc: getVideoSrc(action.payload) };\n        case \"setDecisionsMenu\":\n            return { ...state, decisionsMenu: action.payload };\n        default:\n            //todo never\n            return state;\n    }\n};\n\nlet EpisodePlayer: React.FC<Props> = ({ onGameEnded, volume }) => {\n    const classes = useStyles();\n\n    //STATE\n    const [videoPaused, setVideoPaused] = useState(false);\n    const [state, dispatch] = useReducer(reducer, {\n        episode: 0, scene: 0, videoSrc: getVideoSrc(episodesSchema[0].scenes[0].videoId!), decisionsMenu: null\n    });\n\n    //REF\n    const videoElRef = useRef(null as null | HTMLVideoElement);\n\n    // //CALBACKS\n    const onVideoEndHandler = useCallback(() => {\n        let { episode, scene } = state;\n        const episodeScenes = episodesSchema[state.episode].scenes;\n        if (scene + 1 >= episodeScenes.length) {\n            // if episode has ended\n            if (episode + 1 >= episodesSchema.length) {\n                // if all episodes has ended\n                onGameEnded();\n                return;\n            } else {\n                dispatch({\n                    type: \"nextEpisode\"\n                });\n                episode += 1;\n                scene = 0;\n                //CRINGEEEEE\n            }\n        } else {\n            dispatch({\n                type: \"nextScene\"\n            });\n            scene += 1;\n        }\n\n        const { makeChoice, videoId } = episodesSchema[episode].scenes[scene];\n\n\n        if (makeChoice) {\n            dispatch({\n                type: \"setDecisionsMenu\",\n                payload:\n                    makeChoice.map(({ text, videoId }) => ({\n                        text: text,\n                        callback: () => {\n                            dispatch({\n                                type: \"setVideoIdToPlay\",\n                                payload: videoId\n                            });\n                            videoElRef.current!.play();\n                        }\n                    })\n                    )\n            });\n        } else if (videoId) {\n            dispatch({\n                type: \"setVideoIdToPlay\",\n                payload: videoId\n            });\n        }\n    }, [state, onGameEnded]);\n\n    const onVideoClickHandler = useCallback(() => {\n        const { current: videoEl } = videoElRef;\n        if (!videoEl || videoEl.ended) return;\n        videoEl.paused ? videoEl.play() : videoEl.pause();\n    }, []);\n    const onVideoDoubleClickHandler = useCallback(() => {\n        try {\n            if (!document.fullscreenEnabled) throw new Error(\"fullscreen isn't enabled\");\n            if (document.fullscreenElement === null) document.documentElement.requestFullscreen();\n            else document.exitFullscreen();\n        } catch (err) {\n            console.error(err);\n        }\n    }, []);\n\n    //EFFECTS\n    useEffect(() => {\n        const keyboardListener = (e: KeyboardEvent) => {\n            const { current: videoEl } = videoElRef;\n            if (!videoEl || videoEl.ended) return;\n\n            if (e.code.toLowerCase() === \"space\") {\n                videoEl.paused ? videoEl.play() : videoEl.pause();\n            }\n        };\n\n        const { current: videoEl } = videoElRef;\n        if (!videoEl) throw new TypeError(\"video is not defined\");\n        videoEl.onpause = () => !videoEl.ended && setVideoPaused(true);\n        videoEl.onplay = () => setVideoPaused(false);\n\n        window.addEventListener(\"keydown\", keyboardListener);\n        document.onfullscreenerror = () => { };\n\n        return () => {\n            window.removeEventListener(\"keydown\", keyboardListener);\n            document.onfullscreenerror = null;\n        };\n    }, []);\n    useEffect(() => {\n        const { current: videoEl } = videoElRef;\n        if (!videoEl || videoEl.ended) return;\n        videoEl.volume = volume;\n    }, [volume]);\n\n    return <div className={classes.outer} onClick={onVideoClickHandler} onDoubleClick={onVideoDoubleClickHandler}>\n        <video autoPlay className={classes.player} src={state.videoSrc} onEnded={onVideoEndHandler} ref={videoElRef} />\n        {\n            videoPaused && <div className={classes.pausedOuter}>\n                <Typography variant=\"h2\" component=\"h2\" className={classes.pausedText}>PAUSED</Typography>\n            </div>\n        }\n        {\n            state.decisionsMenu &&\n            <div className={classes.desicionsMenu}>\n                {\n                    state.decisionsMenu.map(({ text, callback }) => (\n                        <Button\n                            key={text}\n                            onClick={(e) => {\n                                e.stopPropagation();\n                                callback();\n                            }}\n                            size=\"large\"\n                            color=\"default\"\n                            variant=\"contained\"\n                            className={classes.desicionItem}\n                        >{text}</Button>\n                    ))\n                }\n            </div>\n        }\n    </div>;\n};\n\nexport default EpisodePlayer;","import { makeStyles } from \"@material-ui/core\";\nimport React from \"react\";\n\ninterface Props {\n}\n\nconst useStyles = makeStyles({\n    outer: {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        background: \"black\",\n        display: \"flex\",\n        justifyContent: \"center\",\n        alignItems: \"center\"\n    },\n    title: {\n        textAlign: \"center\",\n        color: \"lime\",\n        margin: 10\n    }\n});\n\nlet EndScreen: React.FC<Props> = () => {\n    const classes = useStyles();\n\n    return <div className={classes.outer}>\n        <h1 className={classes.title}>Thank You For Playing!</h1>\n    </div>;\n};\n\nexport default EndScreen;","import { Dialog, DialogTitle, DialogContent, DialogActions, Button } from \"@material-ui/core\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport classes from \"./styles.module.scss\";\n\ninterface Props {\n    startGameCallback: () => unknown,\n    volume: number;\n}\n\nconst DO_NOT_DISPLAY_WARNING = \"doNotDisplayWarning\";\n\nlet MainMenu: React.FC<Props> = ({ startGameCallback, volume }) => {\n    //REFS\n    const audioElRef = useRef(null as null | HTMLAudioElement);\n\n    //STATE\n    const [showWarning, setShowWarning] = useState(!localStorage.getItem(DO_NOT_DISPLAY_WARNING));\n\n    //CALLBACKS\n    const closeWarningHanlder = useCallback(() => {\n        localStorage.setItem(DO_NOT_DISPLAY_WARNING, \"yes\");\n        setShowWarning(false);\n    }, []);\n\n    //EFFECTS\n    useEffect(() => {\n        if (showWarning) return;\n        const { current: audioEl } = audioElRef;\n        if (!audioEl) throw new TypeError(\"can't set audio to background audio\");\n        audioEl.volume = volume;\n        audioEl.oncanplay = () => audioEl.play();\n    }, [showWarning, volume]);\n\n    return <div\n        className={classes[\"home-screen\"]}\n    >\n        {\n            showWarning ? <Dialog open={true} disableBackdropClick={true}>\n                <DialogTitle>Hey!</DialogTitle>\n                <DialogContent>\n                    Возможен мат, лучше играть с наушниками.\n                </DialogContent>\n                <DialogActions>\n                    <Button color=\"primary\" onClick={closeWarningHanlder}>Поехали!</Button>\n                </DialogActions>\n            </Dialog> :\n                <audio src={\"/MainMenuLoop.mp3\"} autoPlay loop ref={audioElRef} />\n        }\n        <h1 className={classes[\"app-title\"]}>{process.env.REACT_APP_NAME}</h1>\n        <div className={classes[\"menu\"]}>\n            <div className={classes[\"title\"]}>Main Menu</div>\n            <div className={classes[\"item\"] + \" \" + classes[\"blink-animation\"]} onClick={startGameCallback}>Start the game</div>\n            <div className={classes[\"item\"]} onClick={startGameCallback}>Start the game</div>\n            <div className={classes[\"item\"]} onClick={startGameCallback}>Start the game</div>\n        </div>\n    </div>;\n};\n\nexport default MainMenu;","import { CssBaseline, Slider, makeStyles, Grid, createMuiTheme, ThemeProvider } from \"@material-ui/core\";\nimport React, { useCallback, useMemo, useState } from \"react\";\nimport EpisodePlayer from \"./components/EpisodePlayer\";\nimport EndScreen from \"./components/EndScreen\";\nimport MainMenu from \"./components/main-menu\";\nimport { VolumeUp as VolumeUpIcon } from \"@material-ui/icons\";\n\ninterface Props {\n}\n\nconst useStyles = makeStyles({\n    volumeSlider: {\n        position: \"fixed\",\n        bottom: 5,\n        left: 5,\n        zIndex: 5\n    }\n});\n\nlet App: React.FC<Props> = () => {\n    const classes = useStyles();\n\n    //STATE\n    const [currentScreen, setCurrentScreen] = useState(\"home\" as \"home\" | \"player\" | \"end\");\n    const [appVolume, setAppVolume] = useState(0.7);\n\n    //MEMO\n    const muiTheme = useMemo(() => {\n        return createMuiTheme({\n            palette: {\n                type: \"dark\"\n            }\n        });\n    }, []);\n\n    //CALLBACKS\n    const startGameCallback = useCallback(() => {\n        setCurrentScreen(\"player\");\n    }, []);\n    const onGameEndCallback = useCallback(() => {\n        setCurrentScreen(\"end\");\n    }, []);\n\n    const volumeChangeHandler = useCallback((_, val: number) => setAppVolume(val), []);\n\n    return <ThemeProvider theme={muiTheme}>\n        <CssBaseline />\n        <Grid container className={classes.volumeSlider}>\n            <Grid item>\n                <VolumeUpIcon />\n            </Grid>\n            <Grid item style={{ width: 200, marginLeft: 5 }}>\n                <Slider color=\"secondary\" max={1} step={0.05} value={appVolume} onChange={volumeChangeHandler as any} />\n            </Grid>\n        </Grid>\n        {\n            currentScreen === \"home\" ? <MainMenu startGameCallback={startGameCallback} volume={appVolume} /> :\n                currentScreen === \"end\" ? <EndScreen /> :\n                    currentScreen === \"player\" ? <EpisodePlayer onGameEnded={onGameEndCallback} volume={appVolume} /> :\n                        null\n        }\n    </ThemeProvider>;\n};\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./globals.scss\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}