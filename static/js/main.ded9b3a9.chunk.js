(this["webpackJsonptell-tale-about-borow"]=this["webpackJsonptell-tale-about-borow"]||[]).push([[0],{15:function(e,t,n){e.exports={"home-screen":"styles_home-screen__3mOdz","app-title":"styles_app-title__3ImeI",menu:"styles_menu__2uSYA",title:"styles_title__213TM",item:"styles_item__2SfQF","blink-animation":"styles_blink-animation__1KaaI",blink:"styles_blink__3HleO"}},48:function(e,t,n){e.exports=n(58)},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),l=n(10),o=n.n(l),i=n(19),r=n(81),s=n(43),u=n(87),d=n(88),m=n(89),p=n(93),f=n(16),b=n(59),v=n(91),E=[{title:"\u041d\u0430\u0447\u0430\u043b\u043e. \u0414\u043e\u043c\u0430\u0448\u043d\u0435\u0435 \u043f\u0440\u043e\u0431\u0443\u0436\u0434\u0435\u043d\u0438\u0435.",scenes:[{file:"1/1.mp4",videoId:"12ttDGSpxdWF7zsqadB3hPTlUp9-v6Z56"},{makeChoice:[{text:"\u0421\u0435\u0441\u0442\u044c \u0437\u0430 \u043a\u043e\u043c\u043f",file:"1/2-1.mp4",videoId:"1KDjB_VI-A3PckKOOGe51GwLnvrIBVjpU"},{text:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0442\u0435\u043b\u0435\u043a",file:"1/2-2.mp4",videoId:"1ykOceSFoXxxUErTN3SSv4ySuqAlFBDeh"},{text:"\u0417\u0430\u043a\u0438\u043d\u0443\u0442\u044c\u0441\u044f \u0435\u0449\u0435",file:"1/2-3.mp4",videoId:"1k0Ux3aZpbhABMADvSpF3clfRgImVOC6M"}]}]},{title:"\u0420\u0430\u0437\u0432\u0438\u0442\u0438\u0435. \u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043d\u0430 \u0443\u043b\u0438\u0446\u0443.",scenes:[{file:"2/1.mp4",videoId:"1mFqU6zoJjdha-eLc62NYNXOEMoYAigmi"},{makeChoice:[{text:"\u041f\u043e\u0439\u0442\u0438 \u043f\u0435\u0448\u043a\u043e\u043c \u043f\u043e \u043b\u0435\u0441\u0442\u043d\u0438\u0446\u0435",file:"2/2-1.mp4",videoId:"1MkSoCWs3I3s5B-h2-0TTmj8XZ4eg6Vqd"},{text:"\u041f\u043e\u0435\u0445\u0430\u0442\u044c \u043d\u0430 \u043b\u0438\u0444\u0442\u0435",file:"2/2-2.mp4",videoId:"1LlqTPu-hYR3gTsfd7wnYOC-_Two7xF69"}]},{file:"2/3.mp4",videoId:"1uoLSsAjybgWtpIDNNIEFK0KCnl4W806F"},{makeChoice:[{text:"\u041b\u0430\u0434\u0430",file:"2/4.mp4",videoId:"1cv5uIEr-M0QiPd2Zwx1SEj8AKpXEiCRv"},{text:"\u0410\u0443\u0434\u0438",file:"2/4.mp4",videoId:"1cv5uIEr-M0QiPd2Zwx1SEj8AKpXEiCRv"}]}]}],y={position:"fixed",top:0,bottom:0,left:0,right:0},h=Object(r.a)({outer:Object(f.a)({},y,{background:"black"}),player:Object(f.a)({},y,{width:"100%",height:"100%",overflow:"hidden"}),desicionsMenu:Object(f.a)({},y,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100vh",zIndex:15}),pausedText:{zIndex:10,background:"rgba(0, 0, 0, 50%)"},pausedOuter:Object(f.a)({},y,{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh"}),desicionItem:{width:300}}),k=function(e){return"https://drive.google.com/uc?export=download&id=".concat(e)},j=function(e,t){switch(t.type){case"resetState":return{episode:0,scene:0,videoSrc:k(E[0].scenes[0].videoId),decisionsMenu:null};case"nextScene":return Object(f.a)({},e,{scene:e.scene+1});case"nextEpisode":return Object(f.a)({},e,{episode:e.episode+1,scene:0});case"setVideoIdToPlay":return Object(f.a)({},e,{decisionsMenu:null,videoSrc:k(t.payload)});case"setDecisionsMenu":return Object(f.a)({},e,{decisionsMenu:t.payload});default:return e}},O=function(e){var t=e.onGameEnded,n=e.volume,l=h(),o=Object(a.useState)(!1),r=Object(i.a)(o,2),s=r[0],u=r[1],d=Object(a.useReducer)(j,{episode:0,scene:0,videoSrc:k(E[0].scenes[0].videoId),decisionsMenu:null}),m=Object(i.a)(d,2),p=m[0],f=m[1],y=Object(a.useRef)(null),O=Object(a.useCallback)((function(){var e=p.episode,n=p.scene;if(n+1>=E[p.episode].scenes.length){if(e+1>=E.length)return void t();f({type:"nextEpisode"}),e+=1,n=0}else f({type:"nextScene"}),n+=1;var a=E[e].scenes[n],c=a.makeChoice,l=a.videoId;c?f({type:"setDecisionsMenu",payload:c.map((function(e){var t=e.text,n=e.videoId;return{text:t,callback:function(){f({type:"setVideoIdToPlay",payload:n}),y.current.play()}}}))}):l&&f({type:"setVideoIdToPlay",payload:l})}),[p,t]),x=Object(a.useCallback)((function(){var e=y.current;e&&!e.ended&&(e.paused?e.play():e.pause())}),[]),I=Object(a.useCallback)((function(){try{if(!document.fullscreenEnabled)throw new Error("fullscreen isn't enabled");null===document.fullscreenElement?document.documentElement.requestFullscreen():document.exitFullscreen()}catch(e){console.error(e)}}),[]);return Object(a.useEffect)((function(){var e=function(e){var t=y.current;t&&!t.ended&&"space"===e.code.toLowerCase()&&(t.paused?t.play():t.pause())},t=y.current;if(!t)throw new TypeError("video is not defined");return t.onpause=function(){return!t.ended&&u(!0)},t.onplay=function(){return u(!1)},window.addEventListener("keydown",e),document.onfullscreenerror=function(){},function(){window.removeEventListener("keydown",e),document.onfullscreenerror=null}}),[]),Object(a.useEffect)((function(){var e=y.current;e&&!e.ended&&(e.volume=n)}),[n]),c.a.createElement("div",{className:l.outer,onClick:x,onDoubleClick:I},c.a.createElement("video",{autoPlay:!0,className:l.player,src:p.videoSrc,onEnded:O,ref:y}),s&&c.a.createElement("div",{className:l.pausedOuter},c.a.createElement(b.a,{variant:"h2",component:"h2",className:l.pausedText},"PAUSED")),p.decisionsMenu&&c.a.createElement("div",{className:l.desicionsMenu},p.decisionsMenu.map((function(e){var t=e.text,n=e.callback;return c.a.createElement(v.a,{key:t,onClick:function(e){e.stopPropagation(),n()},size:"large",color:"default",variant:"contained",className:l.desicionItem},t)}))))},x=Object(r.a)({outer:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"black",display:"flex",justifyContent:"center",alignItems:"center"},title:{textAlign:"center",color:"lime",margin:10}}),I=function(){var e=x();return c.a.createElement("div",{className:e.outer},c.a.createElement("h1",{className:e.title},"Thank You For Playing!"))},g=n(90),C=n(84),S=n(85),w=n(86),N=n(15),_=n.n(N),M=function(e){var t=e.startGameCallback,n=e.volume,l=Object(a.useRef)(null),o=Object(a.useState)(!localStorage.getItem("doNotDisplayWarning")),r=Object(i.a)(o,2),s=r[0],u=r[1],d=Object(a.useCallback)((function(){localStorage.setItem("doNotDisplayWarning","yes"),u(!1)}),[]);return Object(a.useEffect)((function(){if(!s){var e=l.current;if(!e)throw new TypeError("can't set audio to background audio");e.volume=n,e.oncanplay=function(){return e.play()}}}),[s,n]),c.a.createElement("div",{className:_.a["home-screen"]},s?c.a.createElement(g.a,{open:!0,disableBackdropClick:!0},c.a.createElement(C.a,null,"Hey!"),c.a.createElement(S.a,null,"\u0412\u043e\u0437\u043c\u043e\u0436\u0435\u043d \u043c\u0430\u0442, \u043b\u0443\u0447\u0448\u0435 \u0438\u0433\u0440\u0430\u0442\u044c \u0441 \u043d\u0430\u0443\u0448\u043d\u0438\u043a\u0430\u043c\u0438."),c.a.createElement(w.a,null,c.a.createElement(v.a,{color:"primary",onClick:d},"\u041f\u043e\u0435\u0445\u0430\u043b\u0438!"))):c.a.createElement("audio",{src:"/MainMenuLoop.mp3",autoPlay:!0,loop:!0,ref:l}),c.a.createElement("h1",{className:_.a["app-title"]},"TellTale About Borow"),c.a.createElement("div",{className:_.a.menu},c.a.createElement("div",{className:_.a.title},"Main Menu"),c.a.createElement("div",{className:_.a.item+" "+_.a["blink-animation"],onClick:t},"Start the game"),c.a.createElement("div",{className:_.a.item,onClick:t},"Start the game"),c.a.createElement("div",{className:_.a.item,onClick:t},"Start the game")))},T=n(92),P=Object(r.a)({volumeSlider:{position:"fixed",bottom:5,left:5,zIndex:5}}),A=function(){var e=P(),t=Object(a.useState)("home"),n=Object(i.a)(t,2),l=n[0],o=n[1],r=Object(a.useState)(.7),f=Object(i.a)(r,2),b=f[0],v=f[1],E=Object(a.useMemo)((function(){return Object(s.a)({palette:{type:"dark"}})}),[]),y=Object(a.useCallback)((function(){o("player")}),[]),h=Object(a.useCallback)((function(){o("end")}),[]),k=Object(a.useCallback)((function(e,t){return v(t)}),[]);return c.a.createElement(u.a,{theme:E},c.a.createElement(d.a,null),c.a.createElement(m.a,{container:!0,className:e.volumeSlider},c.a.createElement(m.a,{item:!0},c.a.createElement(T.a,null)),c.a.createElement(m.a,{item:!0,style:{width:200,marginLeft:5}},c.a.createElement(p.a,{color:"secondary",max:1,step:.05,value:b,onChange:k}))),"home"===l?c.a.createElement(M,{startGameCallback:y,volume:b}):"end"===l?c.a.createElement(I,null):"player"===l?c.a.createElement(O,{onGameEnded:h,volume:b}):null)};n(57);o.a.render(c.a.createElement(A,null),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.ded9b3a9.chunk.js.map